(function(e){function t(t){for(var o,s,a=t[0],i=t[1],l=t[2],p=0,b=[];p<a.length;p++)s=a[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&b.push(n[s][0]),n[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);d&&d(t);while(b.length)b.shift()();return r.push.apply(r,l||[]),c()}function c(){for(var e,t=0;t<r.length;t++){for(var c=r[t],o=!0,a=1;a<c.length;a++){var i=c[a];0!==n[i]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=c[0]))}return e}var o={},n={app:0},r=[];function s(t){if(o[t])return o[t].exports;var c=o[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.m=e,s.c=o,s.d=function(e,t,c){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(c,o,function(t){return e[t]}.bind(null,o));return c},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=this["webpackJsonp"]=this["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=i;r.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("56d7")},"0aa8":function(e,t,c){"use strict";var o=c("3d15");t["a"]=e=>{const t={};return e.setTriggerFunction(o["a"]((e,c)=>{const o=t[e];o&&o.forEach(e=>e(c))})),{data:()=>({worker:e,$_boundWorkerEventHandlers:null}),mounted(){if(this.$options.workerEvents){this.$_boundWorkerEventHandlers={};for(const[e,c]of Object.entries(this.$options.workerEvents)){const o=c.bind(this);this.$_boundWorkerEventHandlers[e]=o,t[e]=t[e]||[],t[e].push(o)}}},unmounted(){if(this.$options.workerEvents)for(const[e,c]of Object.entries(this.$_boundWorkerEventHandlers))t[e]=t[e].filter(e=>e!==c)}}}},"1fb4":function(e,t,c){},"3dfd":function(e,t,c){"use strict";var o=c("7a23");const n=Object(o["withScopeId"])("data-v-f64a2310");Object(o["pushScopeId"])("data-v-f64a2310");const r={class:"main"},s=Object(o["createTextVNode"])(" TODO: plot pos data here "),a=Object(o["createTextVNode"])(" TODO: plot clusters here "),i=Object(o["createVNode"])("hr",null,null,-1),l=Object(o["createVNode"])("div",{class:"note"},[Object(o["createTextVNode"])(" Note this whole thing is still in early development. "),Object(o["createVNode"])("br"),Object(o["createVNode"])("br"),Object(o["createTextVNode"])(" View the source on github "),Object(o["createVNode"])("a",{href:"https://github.com/d1manson/waveform2020"},"here"),Object(o["createTextVNode"])(", you can also see the old 2016 version "),Object(o["createVNode"])("a",{href:"https://github.com/d1manson/waveform"},"here"),Object(o["createTextVNode"])(". "),Object(o["createVNode"])("br"),Object(o["createVNode"])("br"),Object(o["createTextVNode"])(" Google Analytics is used to track usage, but the data sent to Google is pretty basic - it doesn't include any details about the data you are looking at. ")],-1);Object(o["popScopeId"])();const d=n((e,t,c,d,p,b)=>{const u=Object(o["resolveComponent"])("file-explorer"),m=Object(o["resolveComponent"])("pane"),h=Object(o["resolveComponent"])("splitpanes"),O=Object(o["resolveComponent"])("tile-wall"),j=Object(o["resolveComponent"])("file-drop");return Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[Object(o["createVNode"])(h,{vertical:"",class:"default-theme"},{default:n(()=>[Object(o["createVNode"])(m,{size:"30"},{default:n(()=>[Object(o["createVNode"])(h,{horizontal:"",class:"default-theme"},{default:n(()=>[Object(o["createVNode"])(m,{size:"30"},{default:n(()=>[Object(o["createVNode"])(u)]),_:1}),Object(o["createVNode"])(m,{size:"35"},{default:n(()=>[s]),_:1}),Object(o["createVNode"])(m,{size:"35",class:"bottom-pane"},{default:n(()=>[a,i,l]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(m,{size:"70"},{default:n(()=>[Object(o["createVNode"])(O)]),_:1})]),_:1}),Object(o["createVNode"])(j)])}),p=Object(o["withScopeId"])("data-v-425e2813");Object(o["pushScopeId"])("data-v-425e2813");const b={key:0,class:"wrapper"},u=Object(o["createVNode"])("div",{class:"background"},[Object(o["createVNode"])("div",{class:"border"})],-1),m=Object(o["createVNode"])("div",{class:"inner-wrapper"},[Object(o["createVNode"])("div",{class:"inner"},[Object(o["createTextVNode"])(" Supported file types: "),Object(o["createVNode"])("ul",null,[Object(o["createVNode"])("li",null,[Object(o["createVNode"])("strong",null,"Axona"),Object(o["createTextVNode"])(" .set, .pos, .cut, and numbered tet files ")])])])],-1);Object(o["popScopeId"])();const h=p((e,t,c,n,r,s)=>e.dragging?(Object(o["openBlock"])(),Object(o["createBlock"])("div",b,[u,m])):Object(o["createCommentVNode"])("",!0));var O={name:"FileDrop",props:{},data:()=>({dragging:!1}),mounted(){window.fd=this,window.document.addEventListener("dragover",this.onDragOver.bind(this)),window.document.addEventListener("drop",this.onDrop.bind(this))},methods:{async onDrop(e){e.preventDefault();const t=e.dataTransfer.items?[...e.dataTransfer.items].filter(e=>"file"===e.kind).map(e=>e.getAsFile()):e.dataTransfer.files;this.dragging=!1,gtag("event","drop-files",{value:t.length}),this.worker.addFiles(t)},onDragOver(e){e.preventDefault(),this.dragging=!0,clearTimeout(this._timer),this._timer=setTimeout(()=>this.dragging=!1,500)}}};c("ac3b");O.render=h,O.__scopeId="data-v-425e2813";var j=O;const f=Object(o["withScopeId"])("data-v-2c718ab3");Object(o["pushScopeId"])("data-v-2c718ab3");const v={class:"file-explorer"},N={class:"experiment-list"},g={class:"experiment-top"},w={class:"experiment-bottom"},k={class:"state-info"},x={key:1,class:"empty"},y=Object(o["createVNode"])("h4",null,"File Explorer",-1),_=Object(o["createTextVNode"])(" After dragging files onto the page, they will be listed here. ");Object(o["popScopeId"])();const T=f((e,t,c,n,r,s)=>{const a=Object(o["resolveComponent"])("global-events");return Object(o["openBlock"])(),Object(o["createBlock"])("div",v,[Object(o["createVNode"])(a,{onKeyup:[t[1]||(t[1]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,1),["1"])),t[2]||(t[2]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,2),["2"])),t[3]||(t[3]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,3),["3"])),t[4]||(t[4]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,4),["4"])),t[5]||(t[5]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,5),["5"])),t[6]||(t[6]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,6),["6"])),t[7]||(t[7]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,7),["7"])),t[8]||(t[8]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,8),["8"])),t[9]||(t[9]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,9),["9"])),t[10]||(t[10]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,e.selectedTetNum+1),["right"])),t[11]||(t[11]=Object(o["withKeys"])(t=>s.switchTo(e.selectedExperimentName,e.selectedTetNum-1),["left"])),t[12]||(t[12]=Object(o["withKeys"])(t=>s.switchTo(s.getExperimentNameRelative(e.selectedExperimentName,-1)),["up"])),t[13]||(t[13]=Object(o["withKeys"])(t=>s.switchTo(s.getExperimentNameRelative(e.selectedExperimentName,1)),["down"]))]}),e.experiments.length?(Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])("div",N,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.experiments,t=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:t.name,class:["experiment",{selected:t.name===e.selectedExperimentName}],onClick:e=>s.switchTo(t.name)},[Object(o["createVNode"])("div",g,[Object(o["createVNode"])("div",{class:["experiment-name",{selected:t.name===e.selectedExperimentName}]}," trial '"+Object(o["toDisplayString"])(t.name)+"' ",3),t.set_file?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:0,class:["file set-file",{selected:t.name===e.selectedExperimentName}],title:t.set_file.name},Object(o["toDisplayString"])(t.set_file.short),11,["title"])):Object(o["createCommentVNode"])("",!0),t.pos_file?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:1,class:["file pos-file",{selected:t.name===e.selectedExperimentName}],title:t.pos_file.name},Object(o["toDisplayString"])(t.pos_file.short),11,["title"])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",w,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(t.tetrodes.filter(e=>!!e),c=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:c.num,class:"tet-file-group",onClick:Object(o["withModifiers"])(e=>s.switchTo(t.name,c.num),["stop"])},[c.tet_file?(Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:0,class:["file tet-file",{small:e.selectedTetNum!==c.num,selected:e.selectedTetNum===c.num&&e.selectedExperimentName===t.name}],title:c.tet_file.name},Object(o["toDisplayString"])(c.tet_file.short),11,["title"])):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(c.cut_files,n=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["file cut-file",{small:e.selectedTetNum!==c.num,selected:e.selectedCutName&&e.selectedCutName===n.name}],key:n.name,title:n.name,onClick:Object(o["withModifiers"])(e=>s.switchTo(t.name,c.num,n.name),["stop"])},Object(o["toDisplayString"])(n.short),11,["title","onClick"]))),128))],8,["onClick"]))),128))])],10,["onClick"]))),128))]),Object(o["createVNode"])("div",k," Selected trial '"+Object(o["toDisplayString"])(e.selectedExperimentName)+"', "+Object(o["toDisplayString"])(e.selectedTetNum?"tetrode #"+e.selectedTetNum:"but no tetrode selected")+". ",1)],64)):(Object(o["openBlock"])(),Object(o["createBlock"])("div",x,[y,_]))])});var V=c("7e10"),E={name:"FileExplorer",props:{},components:{GlobalEvents:V["a"]},workerEvents:{"update:organised-files"(e){this.experiments=e}},data:()=>({experiments:[],selectedExperimentName:null,selectedTetNum:null,selectedCutName:null}),mounted(){window.fe=this},methods:{switchTo(e,t,c){if(this.selectedExperimentName=e,this.selectedTetNum=Math.max(1,t)||this.selectedTetNum,this.selectedCutName=c,!this.selectedCutName){const t=this.experiments.find(t=>t.name===e),c=t&&t.tetrodes[this.selectedTetNum];c&&(this.selectedCutName=c.cut_files[0]&&c.cut_files[0].name)}gtag("event","switch-to",{}),this.worker.render({experiment_name:this.selectedExperimentName,tet_num:this.selectedTetNum,cut_file_name:this.selectedCutName})},getExperimentNameRelative(e,t){const c=this.experiments.findIndex(t=>t.name==e),o=this.experiments[c+t];return o&&o.name||e}},watch:{experiments(){if(this.experiments.length&&!this.selectedExperimentName){const e=this.experiments[0].tetrodes.find(e=>!!e);this.switchTo(this.experiments[0].name,e&&e.num)}}}};c("9a7b");E.render=T,E.__scopeId="data-v-2c718ab3";var B=E,C=c("512e");c("c1ea");const S=Object(o["withScopeId"])("data-v-6364b0c2");Object(o["pushScopeId"])("data-v-6364b0c2");const I={class:"tile-wall"},D={class:"group-info"},F={key:0,ref:"offCanvas",width:"1024",height:"1024",style:{position:"absolute",bottom:"0px",right:"0px",opacity:"0.4",border:"1px solid red",width:"256px",height:"256px"}};Object(o["popScopeId"])();const K=S((e,t,c,n,r,s)=>{const a=Object(o["resolveComponent"])("worker-canvas");return Object(o["openBlock"])(),Object(o["createBlock"])("div",I,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.cutGroupCounts,(e,t)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"cut-group",key:t},[Object(o["createVNode"])("div",D,"#"+Object(o["toDisplayString"])(t)+" | n="+Object(o["toDisplayString"])(e),1),Object(o["createVNode"])(a,{path:"waves."+t},null,8,["path"])]))),128)),"development"===e.BUILD?(Object(o["openBlock"])(),Object(o["createBlock"])("canvas",F,null,512)):Object(o["createCommentVNode"])("",!0)])});var $=c("d2aa"),M={name:"TileWall",props:{},components:{WorkerCanvas:$["b"]},data:()=>({cutGroupCounts:[],BUILD:"production"}),workerEvents:{"update:cut-counts"(e){this.cutGroupCounts=e},"debug-offscreen-page-rendered"(e){this.$refs.offCanvas.getContext("bitmaprenderer").transferFromImageBitmap(e)}},methods:{}};c("c87f");M.render=K,M.__scopeId="data-v-6364b0c2";var P=M,W={name:"App",components:{FileDrop:j,FileExplorer:B,Splitpanes:C["Splitpanes"],Pane:C["Pane"],TileWall:P}};c("7811");W.render=d,W.__scopeId="data-v-f64a2310";t["a"]=W},"56d7":function(e,t,c){"use strict";c.r(t),function(e){var t=c("7a23"),o=c("3dfd"),n=c("3d15"),r=c("0aa8"),s=c("d2aa");const a=n["c"](new Worker(e,void 0)),i=Object(t["createApp"])(o["a"]);i.mixin(Object(r["a"])(a)),i.mount("#app"),(async()=>{a.setRequestCanvasesFunction(n["a"](s["a"]))})()}.call(this,c("9616"))},7811:function(e,t,c){"use strict";c("821e")},"821e":function(e,t,c){},"8bb7":function(e,t,c){},9616:function(e,t,c){e.exports=c.p+"js/0.a7d4a7bc.worker.js"},"9a7b":function(e,t,c){"use strict";c("e3e6")},"9e86":function(e,t,c){"use strict";c("1fb4")},ac3b:function(e,t,c){"use strict";c("c6cd")},c6cd:function(e,t,c){},c87f:function(e,t,c){"use strict";c("8bb7")},d2aa:function(e,t,c){"use strict";c.d(t,"a",(function(){return d}));var o=c("7a23");const n=Object(o["withScopeId"])("data-v-bb32e126");Object(o["pushScopeId"])("data-v-bb32e126");const r={class:"canv-wrapper"};Object(o["popScopeId"])();const s=n((e,t,c,n,s,a)=>(Object(o["openBlock"])(),Object(o["createBlock"])("div",r)));var a=c("3d15");const i=new Map,l=new Map;function d(e){const t=e.map(({path:e,width:t,height:c})=>{const o=document.createElement("canvas");return o.width=t,o.height=c,i.set(e,o),l.has(e)&&l.get(e)(o),o.transferControlToOffscreen()});return a["b"](t,t)}var p={name:"WorkerCanvas",props:{path:{required:!0,type:String}},mounted(){this._handler=e=>{this.$el.firstChild?this.$el.replaceChild(this.$el.firstChild,e):this.$el.appendChild(e)},this._register(this.path)},unmounted(){this._release(this.path)},methods:{_register(e){l.set(e,this._handler),i.has(e)&&this._handler(i.get(e))},_release(e){l.get(e)===this._handler&&l.delete(e)}},watch:{path(e,t){this._release(t),this._register(e)}}};c("9e86");p.render=s,p.__scopeId="data-v-bb32e126";t["b"]=p},e3e6:function(e,t,c){}});
//# sourceMappingURL=app.a5f25222.js.map